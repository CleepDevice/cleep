<div layout="column" layout-padding ng-cloak>

    <!-- navigation tabs -->
    <md-nav-bar md-selected-nav-item="systemCtl.tabIndex" nav-bar-aria-label="System tabs">
        <md-nav-item md-nav-click="goto('general')" name="general">General</md-nav-item>
        <md-nav-item md-nav-click="goto('renderings')" name="renderings">Renderings</md-nav-item>
        <md-nav-item md-nav-click="goto('advanced')" name="advanced">Advanced</md-nav-item>
        <md-nav-item md-nav-click="goto('troubleshoot')" name="troubleshoot">Troubleshoot</md-nav-item>
    </md-nav-bar>

    <!-- general tab -->
    <div layout="column" layout-padding ng-if="systemCtl.tabIndex=='general'">

        <!-- city + sunset/sunrise -->
        <md-list ng-cloak>
            <md-subheader class="md-no-sticky">Sunset/sunrise</md-subheader>
            <md-list-item>
                <p>System needs to know your approximative position to compute sunrise and sunset hours.</p>
            </md-list-item>
        </md-list-item>
        <div layout="row" style="padding: 0 16px;">
            <md-input-container class="md-block" flex-gt-sm>
                <label>Biggest city closed to your position</label>
                <input type="text" ng-model="systemCtl.city"></input>
            </md-input-container>
            <md-input-container class="md-block" flex-gt-sm>
                <label>Country name</label>
                <input type="text" ng-model="systemCtl.country"></input>
            </md-input-container>
            <div>
                <md-button class="md-raised md-primary" ng-click="systemCtl.setCity()" aria-label="Set city">
                    <md-icon md-svg-icon="crosshairs-gps"></md-icon>
                    Set position
                </md-button>
            </div>
        </div>

        <!-- device name -->
        <md-list ng-cloak>
            <md-subheader class="md-no-sticky">Device name</md-subheader>
            <md-list-item>
                <p>Set device name to identify it easily on your network</p>
            </md-list-item>
        </md-list-item>
        <div layout="row" style="padding: 0 16px;">
            <md-input-container class="md-block" flex-gt-sm>
                <label>Device name</label>
                <input type="text" ng-model="systemCtl.hostname"></input>
            </md-input-container>
            <div>
                <md-button class="md-raised md-primary" ng-click="systemCtl.setHostname()" aria-label="Set device name">
                    <md-icon md-svg-icon="rename-box"></md-icon>
                    Set device name
                </md-button>
            </div>
        </div>
        
    </div>

    <!-- renderings -->
    <div layout="column" layout-padding ng-if="systemCtl.tabIndex=='renderings'">
        <md-list ng-cloak>

            <md-list-item>
                <p>Some installed modules have capability to render several events: messageboard is capable of rendering time events (displaying it) or smtp module is capable of rendering email event (sending an email)...</p>
            </md-list-item>
            <md-list-item>
                <p>Options below give you a way to disable those events handled by modules:</p>
            </md-list-item>
            <md-list-item ng-repeat="rendering in systemCtl.renderings" ng-click="systemCtl.updateRendering(rendering,false)">
                <md-icon md-svg-icon="chevron-double-right"></md-icon>
                <p>Disable <b>{{rendering.event}}</b> handled by <b>{{rendering.renderer}}</b> module</p>
                <md-checkbox class="md-secondary" ng-model="rendering.disabled" ng-click="systemCtl.updateRendering(rendering,true)" aria-label="Rendering"></md-checkbox>
            </md-list-item>

        </md-list>
    </div>

    <!-- advanced -->
    <div layout="column" layout-padding ng-if="systemCtl.tabIndex=='advanced'">
        <md-list ng-cloak>

            <!-- system action -->
            <md-subheader class="md-no-sticky">Actions</md-subheader>
            <md-list-item ng-click="systemCtl.restart()">
                <md-icon md-svg-icon="chevron-double-right"></md-icon>
                <p>Restart application</p>
                <md-button class="md-secondary md-primary" ng-click="systemCtl.restart()">
                    <md-icon md-svg-icon="restart"></md-icon>
                    Restart
                </md-button>
            </md-list-item>
            <md-list-item ng-click="systemCtl.reboot()">
                <md-icon md-svg-icon="chevron-double-right"></md-icon>
                <p>Reboot device</p>
                <md-button class="md-secondary md-warn" ng-click="systemCtl.reboot()">
                    <md-icon md-svg-icon="restart"></md-icon>
                    Reboot
                </md-button>
            </md-list-item>
            <md-list-item ng-click="systemCtl.halt()">
                <md-icon md-svg-icon="chevron-double-right"></md-icon>
                <p>Halt device</p>
                <md-button class="md-secondary md-warn" ng-click="systemCtl.halt()">
                    <md-icon md-svg-icon="stop"></md-icon>
                    Halt
                </md-button>
            </md-list-item>

            <!-- monitoring -->
            <md-subheader class="md-no-sticky">Monitoring</md-subheader>
            <md-list-item ng-click="systemCtl.updateMonitoring(false)">
                <md-icon md-svg-icon="chevron-double-right"></md-icon>
                <p>Enable monitoring allows you to follow cpu and memory consumption of device.</p>
                <md-checkbox class="md-secondary" ng-model="systemCtl.monitoring" ng-click="systemCtl.updateMonitoring(true)" aria-label="Monitoring option"></md-checkbox>
            </md-list-item>

        </md-list>
    </div>

    <!-- troubleshoot -->
    <div layout="row" layout-padding ng-if="systemCtl.tabIndex=='troubleshoot'">
        
        <div layout="column" layout-padding flex="75" layout-sm="column" flex-sm="100">
            <div layout="row">
                <md-button class="md-primary md-raised" ng-click="systemCtl.getLogs()">
                    <md-icon md-svg-icon="refresh"></md-icon>
                    Refresh logs
                </md-button>
                <span flex></span>
                <md-button class="md-primary md-raised" ng-click="systemCtl.downloadLogs()">
                    <md-icon md-svg-icon="download"></md-icon>
                    Download logs
                </md-button>
            </div>
            <div>
                <div ui-codemirror ui-codemirror-opts="systemCtl.codemirrorOptions" ng-model="systemCtl.logs" class="codemirror-code"></div>
            </div>
        </div>

        <div layout="column" layout-padding flex="25">
            <div class="md-title">
                Modules to debug
            </div>
            <div>
                <div ng-repeat="(module, debug) in systemCtl.debugs">
                    <md-checkbox ng-model="debug.debug" aria-label="Debug enabled" ng-change="systemCtl.debugChanged(module)">
                        {{module}}
                    </md-checkbox>
                </div>
            </div>
        </div>

    </div>

</div>

