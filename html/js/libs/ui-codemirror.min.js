"use strict";function uiCodemirrorDirective(r,n){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return e}};function e(e,o,i,t){var u=angular.extend({value:o.text()},n.codemirror||{},e.$eval(i.uiCodemirror),e.$eval(i.uiCodemirrorOpts)),a=function(r,n){var e;"TEXTAREA"===r[0].tagName?e=window.CodeMirror.fromTextArea(r[0],n):(r.html(""),e=new window.CodeMirror((function(n){r.append(n)}),n));return e.setSize("100%","100%"),e}(o,u);!function(r,n,e){if(!n)return;var o=Object.keys(window.CodeMirror.defaults);function i(n,e){angular.isObject(n)&&(angular.isFunction(n.onLoad)&&(n.onLoad(r),n.onLoad=null),o.forEach((function(o){if(n.hasOwnProperty(o)){if(e&&n[o]===e[o])return;r.setOption(o,n[o])}})))}e.$watch(n,i,!0)}(a,i.uiCodemirror,e),function(r,n,e,o){if(!e)return;e.$formatters.push((function(r){if(angular.isUndefined(r)||null===r)return"";if(angular.isObject(r)||angular.isArray(r))throw new Error("ui-codemirror cannot use an object or an array as a model");return r})),e.$render=function(){var i=e.$viewValue||"";r.setValue(i),o.$watch(n,(function(n,e){angular.isObject(n)&&angular.isFunction(n.onSet)&&(n.onSet(r),n.onSet=null)}))},r.on("change",(function(r){var n=r.getValue();n!==e.$viewValue&&o.$evalAsync((function(){e.$setViewValue(n)}))}))}(a,i.uiCodemirror,t,e),function(n,e,o){if(!e)return;o.$watch(e,(function(e,o){e!==o&&r((function(){n.refresh()}))}))}(a,i.uiRefresh,e),e.$on("CodeMirror",(function(r,n){if(!angular.isFunction(n))throw new Error("the CodeMirror event requires a callback function");n(a)}))}}angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective);
